# solver `Water Color Sort` 💧🎨

این ریپازیتوری یک حل‌کننده باحال برای بازی محبوب **Water Color Sort** هست که وقتی تو مراحل سختش گیر کردی، به دادت برسه\!

-----

### 🎯 مسئله

همه ما عاشق بازی **Water Color Sort** هستیم\! همون بازی که باید آب‌های رنگی رو توی لوله‌ها مرتب کنی. می‌تونی از لینک زیر دانلودش کنی:

[**Water Color Sort در گوگل پلی**](https://play.google.com/store/apps/details?id=com.yoogalabgaming.puzzle.sort.water)

اما داستان از جایی شروع میشه که مراحل بازی میره بالا و اونقدر سخت میشه که آدم دوست داره گوشی رو بکوبه به دیوار\! 🤯 اینجاست که این پروژه به کارت میاد. این یه تقلب کوچیکه که هر مرحله‌ای رو براش تعریف کنی، مرحله به مرحله حلش می‌کنه.

**می‌تونی دموی آنلاینش رو اینجا امتحان کنی و حالشو ببری:**

### [**✨ اجرای دمو آنلاین ✨**](https://morteza-j8.github.io/games/water-color-sort/)

> **یه هشدار دوستانه:** سعی کن زیاد تقلب نکنی، زیادیشم خوب نیست\! یکم به مغزت فشار بیار، اگه نشد بیا سراغش =)))

> **نکته مهم:** اگه به مرحله‌هایی رسیدی که زیر بعضی رنگ‌ها علامت سوال (❓) بود، اول خودت رنگ‌های مخفی رو پیدا کن و بعد بیا اینجا حلش کن، وگرنه الگوریتم گیج میشه\!

-----

### 🎮 شرح بازی

قوانین بازی خیلی ساده‌ست. هدف اینه که تمام آب‌های رنگی رو طوری مرتب کنی که هر لوله فقط یک رنگ داشته باشه یا کاملاً خالی باشه.

**قوانین اصلی:**

1.  فقط می‌تونی یک رنگ رو روی رنگ **مشابه** خودش بریزی.
2.  لوله‌ی مقصد باید فضای خالی کافی برای ریختن آب داشته باشه.
3.  از لوله‌ی خالی نمی‌تونی آبی برداری.

هرچی مراحل بالاتر میره، تعداد لوله‌ها و تنوع رنگ‌ها بیشتر میشه و پیدا کردن راه حل حسابی چالش‌برانگیز میشه.

-----

### 💡 حل مسئله

یه الگوریتم **جستجوی سطح-اول (BFS)** ساده براش پیاده کردم که بشه بازی رو مرحله به مرحله حل کنه و جلو بره. خیلی الگوریتم خفنی نیست، ولی چون خودم دوست داشتم همچین ابزاری دم دستم باشه، برای همه پیادش کردم تا استفاده کنن.

#### خلاصه‌ای از الگوریتم BFS

الگوریتم BFS مثل اینه که شما یه سنگ توی آب میندازی و موج‌هاش لایه به لایه پخش میشن. این الگوریتم هم تمام حرکات ممکن رو لایه به لایه بررسی می‌کنه تا به کوتاه‌ترین جواب برسه.

* **State (وضعیت):** هر چیدمان از رنگ‌ها داخل لوله‌ها، یک "وضعیت" یا "نود" به حساب میاد. وضعیت اولیه، همون پازلی هست که شما وارد می‌کنی.

* **Goal State (وضعیت هدف):** وضعیتی که در اون هر لوله یا خالیه یا کاملاً با یک رنگ پر شده. این وضعیت پایان بازی و هدف ماست.

* **مراحل حل:**

    1.  **شروع:** وضعیت اولیه پازل رو توی یک صف (Queue) قرار میدیم.
    2.  **بررسی:** اولین وضعیت رو از صف خارج می‌کنیم.
    3.  **پیدا کردن حرکات:** تمام حرکات *مجاز* از این وضعیت رو پیدا می‌کنیم (مثلاً ریختن رنگ از لوله ۱ به ۲، از ۱ به ۳ و...).
    4.  **ساختن وضعیت‌های جدید:** به ازای هر حرکت مجاز، یک وضعیت جدید ساخته میشه.
    5.  **بررسی تکراری نبودن:** چک می‌کنیم که این وضعیت جدید قبلاً دیده شده یا نه. برای این کار، هر وضعیت رو به یک رشته یکتا تبدیل می‌کنیم و در یک مجموعه (Set) به نام `visited` ذخیره می‌کنیم. اگه تکراری نبود:
        * وضعیت جدید رو به انتهای صف اضافه می‌کنیم.
        * اون رو به `visited` هم اضافه می‌کنیم تا دوباره بررسیش نکنیم.
    6.  **تکرار:** این فرآیند (از مرحله ۲) اونقدر تکرار میشه تا یک وضعیت با مشخصات "وضعیت هدف" پیدا بشه. چون BFS لایه به لایه پیش میره، اولین جوابی که پیدا میشه، قطعاً کوتاه‌ترین جواب ممکن از نظر تعداد حرکت هست.